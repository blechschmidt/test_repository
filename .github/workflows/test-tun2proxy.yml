name: Test — tun2proxy (all releases)

# Verifies artifact attestations across every release of tun2proxy/tun2proxy.
# Recent releases use GitHub artifact attestation and should pass.
# Older releases (pre-attestation era) are expected to fail, which will
# trigger automatic issue creation on this repository.

on:
  workflow_dispatch:
  push:
    branches: [main]

jobs:
  verify-all-releases:
    name: Verify all tun2proxy releases
    uses: blechschmidt/artifact-attestation-verification-action/.github/workflows/verify-attestations.yml@main
    with:
      repository: tun2proxy/tun2proxy
      # No tag → checks every release
      open-issue: true
    permissions:
      contents: read
      issues: write
